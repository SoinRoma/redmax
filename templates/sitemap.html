{% load static %}

<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300;0,500;1,400&family=Open+Sans:wght@300&display=swap"
          rel="stylesheet">
    <link rel="icon" href="{% static "images/logos/favicon.svg" %}">
    <link rel="stylesheet" href="{% static "css/bootstrap/bootstrap.css" %}">
    <link rel="stylesheet" href="{% static 'js/toastr/toastr.css' %}">
    <link rel="stylesheet" href="{% static "css/animate.css" %}">
    <link rel="stylesheet" href="{% static "js/popup/magnific-popup.css" %}">
    <link rel="stylesheet" href="{% static "css/style.css" %}?v=8">
    <link rel="stylesheet" href="{% static "css/response.css" %}?v=8">

    <title>REDMAX - Sitemap</title>
</head>
<body>

<section class="sitemap main">
    <header class="header">
        <nav class="container d-flex align-items-center justify-content-between">
            <a href="{% url 'index:index' %}" class="header-logo-redmax">
                <img src="{% static "images/logos/logo.svg" %}" alt="logo">
            </a>
            <button class="menu-button">
                <img src="{% static "images/svg/burger.svg" %}" alt="menu" class="menu-button-icon">
            </button>
            <button class="menu-close">
                <img src="{% static "images/svg/close.svg" %}" alt="back" class="menu-close-icon">
            </button>
            <div class="nav-menu  p-0">
                <ul class="nav-list">
                    <li class="nav-item"><a href="{% url 'brokers:broker' %}" class="nav-link">Brokers</a></li>
                    <li class="nav-item"><a href="{% url 'shippers:shipper' %}" class="nav-link">Shippers</a></li>
                    <li class="nav-item"><a href="{% url 'carriers:carrier' %}" class="nav-link">Carriers</a></li>
                    <li class="nav-item"><a href="{% url 'contact:contact' %}" class="nav-link">Contact</a></li>
                    <li class="nav-item"><a href="{% url 'sitemap:sitemap' %}" class="active-link nav-link">Sitemap</a>
                    </li>
                </ul>
                <div class="header-social">
                    <a href="#">
                        <div class="fb mr-3"></div>
                    </a>
                    <a href="#">
                        <div class="fb mr-3"></div>
                    </a>
                </div>
                <button href="#openModal" class="nav-button openModal" id="callBack" data-effect="mfp-zoom-in">
                    Call back
                </button>
                <p class="mx-2 mb-0" id="timer-block" hidden>
                    We`ll call you <span id="timer" class="text-danger"></span>
                </p>
            </div>
        </nav>
    </header>
    <div class="container d-flex">
        <div class="mainBlock w-100">
            <h2 class="sitemap-title animate__animated animate__fadeInLeft">Sitemap</h2>
            <div class="row sitemap-row animate__animated animate__fadeInLeft">
                <div class=" col-sm-4 col-md-3 col-lg-2">
                    <ul class="p-0">
                        <li class="nav-item">
                            <a href="{% url 'index:index' %}" class="sitemap-main-text">Home page</a>
                        </li>
                        <li class="nav-item sitemapItem">
                            <a href="{% url 'index:index' %}#section-about" class="sitemap-text">About</a>
                        </li>
                        <li class="nav-item sitemapItem">
                            <a href="{% url 'index:index' %}#section-why" class="sitemap-text">Why choose us?</a>
                        </li>
                        <li class="nav-item sitemapItem">
                            <a href="{% url 'index:index' %}#section-stat" class="sitemap-text">Statistics</a>
                        </li>
                        <li class="nav-item sitemapItem">
                            <a href="{% url 'index:index' %}#section-contact" class="sitemap-text">Call back</a>
                        </li>
                    </ul>
                </div>
                <div class=" col-sm-4 col-md-3 col-lg-2">
                    <ul class="p-0">
                        <li class="nav-item">
                            <a href="{% url 'brokers:broker' %}" class="sitemap-main-text">Brokers</a>
                        </li>
                        <li class="nav-item sitemapItem">
                            <a href="{% url 'brokers:broker' %}#section-services" class="sitemap-text">Services</a>
                        </li>
                        <li class="nav-item sitemapItem">
                            <a href="{% url 'brokers:broker' %}#section-why" class="sitemap-text">Why choose us?</a>
                        </li>
                    </ul>
                </div>
                <div class=" col-sm-4 col-md-3 col-lg-2">
                    <ul class="p-0">
                        <li class="nav-item">
                            <a href="{% url 'shippers:shipper' %}" class="sitemap-main-text">Shippers</a>
                        </li>
                        <li class="nav-item sitemapItem">
                            <a href="{% url 'shippers:shipper' %}#section-services" class="sitemap-text">Services</a>
                        </li>
                        <li class="nav-item sitemapItem">
                            <a href="{% url 'shippers:shipper' %}#section-why" class="sitemap-text">Advantages</a>
                        </li>
                        <li class="nav-item sitemapItem">
                            <a href="{% url 'shippers:shipper' %}#section-contact" class="sitemap-text">Questions?</a>
                        </li>
                    </ul>
                </div>
                <div class=" col-sm-4 col-md-3 col-lg-2">
                    <ul class="p-0">
                        <li class="nav-item">
                            <a href="{% url 'carriers:carrier' %}" class="sitemap-main-text">Carriers</a>
                        </li>
                        <li class="nav-item sitemapItem">
                            <a href="{% url 'carriers:carrier' %}#section-why" class="sitemap-text">Advantages</a>
                        </li>
                        <li class="nav-item sitemapItem">
                            <a href="{% url 'carriers:carrier' %}#section-app" class="sitemap-text">Mobile app</a>
                        </li>
                    </ul>
                </div>
                <div class=" col-sm-4 col-md-3 col-lg-2">
                    <ul class="p-0">
                        <li class="nav-item">
                            <a href="{% url 'contact:contact' %}" class="sitemap-main-text">Contact</a>
                        </li>
                        <li class="nav-item sitemapItem">
                            <a href="{% url 'contact:contact' %}" class="sitemap-text">Any questions?</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>

<div id="openModal" class="white-popup white-popup__settings mfp-with-anim mfp-hide">
    <div class="popup-main">
        <div class="contactLeftModal">
            <h2 class="contactTitle">Call back</h2>
            <p class="contactText">
                Please let us know the nature of your inquiry
                and we will get back to you shortly
            </p>
            <form action="#" class="CallBackForm" id="CallBackCreateForm">
                <div class="group">
                    <input type="text" id="nameModal" required autocomplete="off">
                    <label for="nameModal">Your name</label>
                </div>
                <div class="group">
                    <input type="text" id="phoneModal" required autocomplete="off">
                    <label for="phoneModal">Phone number</label>
                </div>
                <button class="contactButtonModal" id="submitBtn">
                    Submit
                </button>
            </form>
        </div>

        <div class="contactLeftModalSuccess" hidden>
            <h2 class="contactTitle text-center">Sent <br> successfully!</h2>
            <img class="d-flex m-auto" src="{% static 'images/svg/success.svg' %}" alt="success">
            <button class="contactButtonModal mt-5" id="doneBtn">
                Done
            </button>
        </div>
    </div>
</div>

<script src="{% static "js/jquery.js" %}"></script>
<script src="{% static "js/bootstrap/bootstrap.js" %}"></script>
<script src="{% static "js/bootstrap/popper.min.js" %}"></script>
<script src="{% static "js/burger/main.js" %}"></script>
<script src="{% static "js/popup/jquery.magnific-popup.min.js" %}"></script>
<script src="{% static 'js/inputmask/input.mask.js' %}"></script>
<script src="{% static 'js/toastr/toastr.js' %}"></script>
<script src="{% static 'js/timer/timer.min.js' %}"></script>
<script src="{% static 'js/wow/wow.min.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>

<script>

   $("#CallBackCreateForm").submit(function (event) {

      event.preventDefault();
      let requestData = new FormData();
      requestData.append('name', $('#nameModal').val());
      requestData.append('phone', $('#phoneModal').val());

      const submitBtn = document.getElementById('submitBtn');
      submitBtn.disabled = true;

      let url = "{% url 'call_back:create' %}";
      $.ajax({
         headers: {"X-CSRFToken": "{{csrf_token}}"},
         url: url,
         processData: false,
         contentType: false,
         method: 'POST',
         data: requestData,
         success: function (data) {
            //Сбрасывание формы и отключение кнопки
            $('#CallBackCreateForm')[0].reset();
            submitBtn.disabled = false;

            // Изменение модального окна и включение таймера
            $('.contactLeftModal').hide();
            $('.contactLeftModalSuccess').removeAttr('hidden');
            $("#callBack").prop("hidden", !this.checked);
            $('#timer-block').removeAttr('hidden');
            $("#timer").html('0:00');

            let timer = new easytimer.Timer();
            timer.start();
            timer.addEventListener("secondsUpdated", function (e) {
               $("#timer").html(timer.getTimeValues().toString().slice(4));
            });

         },
         error: function (data) {
            toastr.error(
               data.responseText,
               'Error',
               {
                  positionClass: "toast-top-center",
                  timeOut: 2000,
                  fadeOut: 1000,
               }
            );
            submitBtn.disabled = false;
         }
      });
   });

</script>
</body>
</html>

